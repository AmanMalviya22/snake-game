(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{11:function(e,t,s){},17:function(e,t,s){"use strict";s.r(t);var a=s(1),i=s.n(a),n=s(5),o=s.n(n),r=(s(11),s(2),s(3),s(0));var d=function(){return Object(r.jsx)("div",{className:"flex",children:Object(r.jsx)("div",{className:"title",children:"SNAKE"})})};var c=e=>Object(r.jsxs)("div",{className:"flex flex-col",children:[Object(r.jsx)("div",{className:"score",children:e.currentScore}),Object(r.jsxs)("div",{className:"best-score",children:[Object(r.jsxs)("span",{className:"subTitle",children:["best:","\xa0"]}),e.bestScore]})]});var h=e=>{let t;switch(e.cellType){case"none":default:t=Object(r.jsx)("div",{});break;case"head":t=Object(r.jsx)("div",{className:"snake-head"});break;case"body":t=Object(r.jsx)("div",{className:"snake-body"});break;case"food":t=Object(r.jsx)("div",{className:"snake-food "+e.foodClass})}return Object(r.jsx)("div",{className:"board-cell flex-center",children:t})};var l=e=>{let t=[],s=e.boardWidth,a=e.boardHeight,i=e.snake,n=e.foodCoordinate;for(let o=0;o<a;o++){let a=[];for(let t=0;t<s;t++)i.isHead([o,t])?a.push(Object(r.jsx)(h,{cellType:"head"})):i.isOn([o,t])?a.push(Object(r.jsx)(h,{cellType:"body"})):n[0]===o&&n[1]===t?a.push(Object(r.jsx)(h,{foodClass:e.foodClass,cellType:"food"})):a.push(Object(r.jsx)(h,{cellType:"none"}));t.push(a)}return Object(r.jsx)("div",{className:"flex",children:Object(r.jsx)("div",{className:"game-board",children:t})})};class m{constructor(){this.head=null,this.tail=!0,this.size=0}isHead(e){return this.head.coordinates[0]===e[0]&&this.head.coordinates[1]===e[1]}isOn(e,t){if(null==this.head)return!1;for(var s=t?this.head.next:this.head;s;){if(s.coordinates[0]===e[0]&&s.coordinates[1]===e[1])return!0;s=s.next}return!1}eat(){let e=this.head;for(;e.next;)e=e.next;let t=e.direction,s="R";switch(t){case"T":s=[e.coordinates[0]+1,e.coordinates[1]];break;case"R":s=[e.coordinates[0],e.coordinates[1]-1];break;case"B":s=[e.coordinates[0]-1,e.coordinates[1]];break;case"L":s=[e.coordinates[0],e.coordinates[1]+1]}this.add(new b(s,t))}add(e){var t;if(e.tail=!0,null==this.head)this.head=e;else{for(t=this.head;t.next;)t=t.next;t.tail=!1,t.next=e}this.size++}clear(e){this.head=null,this.size=0}}class b{constructor(e,t){this.coordinates=e,this.direction=t,this.next=null}}class u{constructor(e,t){this.coordinates=e,this.nextDirection=t}}var j=s(6),v=s.n(j);class g extends a.Component{constructor(){super(),this.foodClasses=["blueberry","cherry","grapes","raspberry","strawberry"],this.turningPoints=[],this.boardWidth=20,this.boardHeight=15,this.snakeDelay=100,this.allowSwipe=!0,this.mode="easy",this.eatAudio=new Audio("https://github.com/diozz/snake-react-js/raw/main/src/sounds/eat.mp3"),this.gameOverAudio=new Audio("https://github.com/diozz/snake-react-js/raw/main/src/sounds/game-over.mp3");let e=new m;e.add(new b([1,3],"R")),e.add(new b([1,2],"R")),e.add(new b([1,1],"R")),this.state={currentScore:0,bestScore:"--",gameOverMsg:"",snake:e,foodCoordinate:[8,18],foodClass:this.foodClasses[this.getRandomInt(0,this.foodClasses.length-1)],gameOverDisplay:!1,gameMenuDisplay:!0},this.updateSnakeState=this.updateSnakeState.bind(this),this.onSwipeMove=this.onSwipeMove.bind(this),this.keyListner=this.keyListner.bind(this),this.startGame=this.startGame.bind(this),this.gameOver=this.gameOver.bind(this),this.endGame=this.endGame.bind(this)}componentDidMount(){this.eatAudio.load(),this.gameOverAudio.load(),document.addEventListener("keydown",this.keyListner,!1)}componentWillUnmount(){document.removeEventListener("keydown",this.keyListner,!1)}keyListner(e){if(this.state.gameMenuDisplay||this.state.gameOverDisplay)return;let t=e.keyCode,s=this.state.snake,a=new u(null,null);switch(t){case 38:if("T"===s.head.direction||"B"===s.head.direction)return;a.nextDirection="T",a.coordinates=[...s.head.coordinates],this.turningPoints.push(a),this.setState({snake:s});break;case 39:if("R"===s.head.direction||"L"===s.head.direction)return;a.nextDirection="R",a.coordinates=[...s.head.coordinates],this.turningPoints.push(a),this.setState({snake:s});break;case 40:if("B"===s.head.direction||"T"===s.head.direction)return;a.nextDirection="B",a.coordinates=[...s.head.coordinates],this.turningPoints.push(a),this.setState({snake:s});break;case 37:if("L"===s.head.direction||"R"===s.head.direction)return;a.nextDirection="L",a.coordinates=[...s.head.coordinates],this.turningPoints.push(a),this.setState({snake:s})}}startGame(e){switch(e){case 75:this.mode="hard";break;case 120:this.mode="medium";break;case 200:this.mode="easy"}this.snakeDelay=e,this.setState({gameMenuDisplay:!1,gameOverDisplay:!1,bestScore:this.getBestScore(this.mode)}),this.intervalId=window.setInterval(this.updateSnakeState,this.snakeDelay)}endGame(){let e=new m;e.add(new b([1,3],"R")),e.add(new b([1,2],"R")),e.add(new b([1,1],"R")),this.setState({currentScore:0,snake:e,bestScore:"--",foodCoordinate:[8,18],foodClass:this.foodClasses[this.getRandomInt(0,this.foodClasses.length-1)],gameOverDisplay:!1,gameMenuDisplay:!0})}updateSnakeState(){let e=this.state.snake,t=e.head;if(e.isOn(t.coordinates,!0))this.gameOver();else{switch(t.direction){case"T":if(t.coordinates[0]<0)return void this.gameOver();break;case"R":if(t.coordinates[1]>this.boardWidth-1)return void this.gameOver();break;case"B":if(t.coordinates[0]>this.boardHeight-1)return void this.gameOver();break;case"L":if(t.coordinates[1]<0)return void this.gameOver()}for(;t;){switch(this.turningPoints.some((e=>e.coordinates[0]===t.coordinates[0]&&e.coordinates[1]===t.coordinates[1]))&&(t.direction=this.turningPoints.filter((e=>e.coordinates[0]===t.coordinates[0]&&e.coordinates[1]===t.coordinates[1]))[0].nextDirection,t.tail&&this.turningPoints.shift()),t.direction){case"T":t.coordinates[0]--;break;case"R":t.coordinates[1]++;break;case"B":t.coordinates[0]++;break;case"L":t.coordinates[1]--}t=t.next}if(e.head.coordinates[0]===this.state.foodCoordinate[0]&&e.head.coordinates[1]===this.state.foodCoordinate[1]){let t=this.state.currentScore+5,s=0,a=0;for(;a=this.getRandomInt(0,this.boardHeight-1),s=this.getRandomInt(0,this.boardWidth-1),a===this.state.foodCoordinate[0]&&s===this.state.foodCoordinate[1]||e.isOn([a,s]););e.eat(),this.eatAudio.play(),this.setState({snake:e,currentScore:t,foodCoordinate:[a,s],foodClass:this.foodClasses[this.getRandomInt(0,this.foodClasses.length-1)]})}else this.setState({snake:e})}}gameOver(){this.gameOverAudio.play(),clearInterval(this.intervalId),this.turningPoints=[];let e="GAME OVER!",t=this.getBestScore(this.mode);this.state.currentScore>t&&(localStorage.setItem(this.mode+"BestScore",this.state.currentScore),t=this.state.currentScore,e="NEW BEST!"),this.setState({gameOverDisplay:!0,bestScore:t,gameOverMsg:e})}getBestScore(e){let t=localStorage.getItem(e+"BestScore");return t=null===t?0:parseInt(t),t}getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}onSwipeMove(e,t){if(this.state.gameMenuDisplay||this.state.gameOverDisplay)return;let s=e.x,a=e.y;this.allowSwipe&&(Math.abs(s)>2||Math.abs(a)>2)&&(this.allowSwipe=!1,Math.abs(a)>Math.abs(s)?this.keyListner({keyCode:a>0?40:38}):this.keyListner({keyCode:s>0?39:37}))}render(){return Object(r.jsx)("div",{className:"app-bg",onTouchStart:()=>{this.allowSwipe=!0},children:Object(r.jsx)(v.a,{className:"full-height flex flex-center",onSwipeMove:this.onSwipeMove,children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)("div",{className:"flex",children:[Object(r.jsx)("div",{className:"titleContainer",children:Object(r.jsx)("div",{className:"border",children:Object(r.jsx)(d,{})})}),Object(r.jsx)("div",{className:"scoreContainer",children:Object(r.jsx)("div",{className:"border",children:Object(r.jsx)(c,{bestScore:this.state.bestScore,currentScore:this.state.currentScore})})})]}),Object(r.jsx)("div",{className:"border mt-2",children:Object(r.jsx)(l,{getRandomInt:this.getRandomInt,boardWidth:this.boardWidth,boardHeight:this.boardHeight,snake:this.state.snake,currentScore:this.state.currentScore,foodCoordinate:this.state.foodCoordinate,foodClass:this.state.foodClass,gameOverDisplay:this.state.gameOverDisplay})}),this.state.gameMenuDisplay&&Object(r.jsxs)("div",{className:"border menu-overlay mt-2",children:[Object(r.jsxs)("div",{className:"flex flex-center",children:[Object(r.jsx)("div",{className:"snake-food snake menu-food mr-4"}),Object(r.jsx)("div",{className:"game-over-text",children:"MENU"}),Object(r.jsx)("div",{className:"snake-food snake invert menu-food ml-4"})]}),Object(r.jsxs)("div",{className:"flex mt-2",children:[Object(r.jsx)("span",{onClick:this.startGame.bind(this,200),className:"snakeButton mr-1",children:"EASY"}),Object(r.jsx)("span",{onClick:this.startGame.bind(this,120),className:"snakeButton mr-1 ml-1",children:"MEDIUM"}),Object(r.jsx)("span",{onClick:this.startGame.bind(this,75),className:"snakeButton ml-1",children:"HARD"})]})]}),this.state.gameOverDisplay&&Object(r.jsxs)("div",{className:"border gameover-overlay mt-2",children:[Object(r.jsx)("div",{className:"game-over-text",children:this.state.gameOverMsg}),Object(r.jsx)("div",{className:"flex mt-2",children:Object(r.jsx)("span",{onClick:this.endGame,className:"snakeButton mr-1 ml-1",children:"RESTART"})})]})]})})})}}var f=g;var x=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,18)).then((t=>{let{getCLS:s,getFID:a,getFCP:i,getLCP:n,getTTFB:o}=t;s(e),a(e),i(e),n(e),o(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(f,{})}),document.getElementById("root")),x()},2:function(e,t,s){},3:function(e,t,s){}},[[17,1,2]]]);
//# sourceMappingURL=main.e65a5094.chunk.js.map